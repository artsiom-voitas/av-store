/*! For license information please see sign-in.js.LICENSE.txt */
(()=>{"use strict";var e={"./src/js/utils.js":(e,t,n)=>{n.r(t),n.d(t,{authorizedUserCheck:()=>u,checkUserData:()=>s,disableFormButton:()=>o,formatDate:()=>m,logout:()=>a,redirectToHome:()=>c,toggleInputWarning:()=>r,unauthorizedUserCheck:()=>l,userFinder:()=>i});let o=function(e,t){t.disabled=!e.checkValidity()},r=function(e,t){let n=document.querySelector(t).querySelector(".text-warning");e.checkValidity()?n.classList.remove("show"):n.classList.add("show")};const i=function(e){let t=JSON.parse(localStorage.getItem("users")),n=t.findIndex((t=>t.email===e));return-1===n?-1:t[n]};let s=function(e,t){let n=i(e);if(-1!==n)return n.password===t},a=function(){document.querySelector(".btn-logout").addEventListener("click",(function(){localStorage.removeItem("active-user"),d()}))},l=function(){setTimeout((function(){null===localStorage.getItem("active-user")&&d()}),1)},u=function(){setTimeout((function(){null!==localStorage.getItem("active-user")&&c()}),1)},c=function(){window.location.replace("./home.html")},d=function(){window.location.replace("./index.html")};function m(e){let t=e.getDate();t<10&&(t="0"+t);let n=e.getMonth()+1;n<10&&(n="0"+n);let o=e.getFullYear();return o<10&&(o="0"+o),t+"."+n+"."+o}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{n.r(o);var e=n("./src/js/utils.js");let t=document.forms["sign-in"],r=t.elements["user-email"],i=t.elements["user-password"],s=t.elements["authorization-button"];t.addEventListener("input",(function(){(0,e.disableFormButton)(this,s)})),r.addEventListener("change",(function(){(0,e.toggleInputWarning)(this,".input-email")})),i.addEventListener("change",(function(){(0,e.toggleInputWarning)(this,".input-password")})),t.addEventListener("submit",(function(t){t.preventDefault();let n=document.querySelector(".log-in");n.classList.remove("show"),n.innerHTML="";let o=r.value,s=i.value;if((0,e.userFinder)(o))!0===(0,e.checkUserData)(o,s)?(n.classList.remove("text-warning"),n.innerHTML="You are successfully logged in!",n.classList.add("show"),localStorage.setItem("active-user",o),setTimeout((()=>{(0,e.redirectToHome)()}),1e3)):(n.innerHTML="Oops, something wrong with yours email or password!",n.classList.add("text-warning"),n.classList.add("show"));else{let e=document.querySelector(".text-warning");e.innerHTML="A user with such email address does not exist",e.classList.add("show")}})),(0,e.authorizedUserCheck)()})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qk4sRUFBVzNDLGlCQUFpQixVQUFVLFNBQVVrRCxHQUM1Q0EsRUFBTUMsaUJBQ04sSUFBSUMsRUFBZXRFLFNBQVNDLGNBQWMsV0FDMUNxRSxFQUFhcEUsVUFBVUMsT0FBTyxRQUM5Qm1FLEVBQWFDLFVBQVksR0FDekIsSUFBSUMsRUFBaUJULEVBQVVILE1BQzNCYSxFQUFvQlIsRUFBYUwsTUFDckMsSUFBS3ZELEVBQUFBLEVBQUFBLFlBQVdtRSxJQUs2QyxLQUFyRHpELEVBQUFBLEVBQUFBLGVBQWN5RCxFQUFnQkMsSUFDOUJILEVBQWFwRSxVQUFVQyxPQUFPLGdCQUM5Qm1FLEVBQWFDLFVBQVksa0NBQ3pCRCxFQUFhcEUsVUFBVUUsSUFBSSxRQUMzQk0sYUFBYWdFLFFBQVEsY0FBZUYsR0FDcENsRCxZQUFXLE1BQ1JFLEVBQUFBLEVBQUFBLG9CQUNBLE9BRUg4QyxFQUFhQyxVQUFZLHNEQUN6QkQsRUFBYXBFLFVBQVVFLElBQUksZ0JBQzNCa0UsRUFBYXBFLFVBQVVFLElBQUksYUFoQkYsQ0FDN0IsSUFBSUwsRUFBVUMsU0FBU0MsY0FBYyxpQkFDckNGLEVBQVF3RSxVQUFZLGdEQUNwQnhFLEVBQVFHLFVBQVVFLElBQUksYUFrQjlCbUIsRUFBQUEsRUFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdi1zdG9yZS8uL3NyYy9qcy91dGlscy5qcyIsIndlYnBhY2s6Ly9hdi1zdG9yZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9hdi1zdG9yZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vYXYtc3RvcmUvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9hdi1zdG9yZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2F2LXN0b3JlLy4vc3JjL2pzL3NpZ24taW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IGRpc2FibGVGb3JtQnV0dG9uID0gZnVuY3Rpb24gKGZvcm0sIGJ1dHRvbkluRm9ybSkge1xyXG4gICAgYnV0dG9uSW5Gb3JtLmRpc2FibGVkID0gIWZvcm0uY2hlY2tWYWxpZGl0eSgpO1xyXG59XHJcblxyXG5sZXQgdG9nZ2xlSW5wdXRXYXJuaW5nID0gZnVuY3Rpb24gKGlucHV0RmllbGQsIHNlbGVjdG9yKSB7XHJcbiAgICBsZXQgZmluZElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcclxuICAgIGxldCB3YXJuaW5nID0gZmluZElucHV0LnF1ZXJ5U2VsZWN0b3IoJy50ZXh0LXdhcm5pbmcnKTtcclxuICAgIGlmICghaW5wdXRGaWVsZC5jaGVja1ZhbGlkaXR5KCkpIHtcclxuICAgICAgICB3YXJuaW5nLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB3YXJuaW5nLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCB1c2VyTGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VycycpKTtcclxufVxyXG5cclxuY29uc3QgdXNlckZpbmRlciA9IGZ1bmN0aW9uIChlbWFpbFZhbHVlKSB7XHJcbiAgICBsZXQgdXNlcnMgPSB1c2VyTGlzdCgpO1xyXG4gICAgbGV0IHVzZXIgPSB1c2Vycy5maW5kSW5kZXgodXNlciA9PiB1c2VyLmVtYWlsID09PSBlbWFpbFZhbHVlKTtcclxuICAgIGlmICh1c2VyID09PSAtMSkge1xyXG4gICAgICAgIHJldHVybiAtMVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdXNlcnNbdXNlcl07XHJcbiAgICB9XHJcbn1cclxuXHJcbmxldCBjaGVja1VzZXJEYXRhID0gZnVuY3Rpb24gKGVtYWlsVmFsdWUsIHBhc3N3b3JkVmFsdWUpIHtcclxuICAgIGxldCB1c2VyID0gdXNlckZpbmRlcihlbWFpbFZhbHVlKTtcclxuICAgIGlmICh1c2VyICE9PSAtMSkge1xyXG4gICAgICAgIHJldHVybiB1c2VyWydwYXNzd29yZCddID09PSBwYXNzd29yZFZhbHVlO1xyXG4gICAgfVxyXG59XHJcblxyXG5sZXQgbG9nb3V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGxvZ291dEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idG4tbG9nb3V0Jyk7XHJcbiAgICBsb2dvdXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FjdGl2ZS11c2VyJyk7XHJcbiAgICAgICAgcmVkaXJlY3RUb0xvZ2luKClcclxuICAgIH0pXHJcbn1cclxuXHJcbmxldCB1bmF1dGhvcml6ZWRVc2VyQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgc3RhdHVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZS11c2VyJylcclxuICAgICAgICBpZiAoc3RhdHVzID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0VG9Mb2dpbigpXHJcbiAgICAgICAgfVxyXG4gICAgfSwgMSlcclxufVxyXG5cclxubGV0IGF1dGhvcml6ZWRVc2VyQ2hlY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgc3RhdHVzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FjdGl2ZS11c2VyJylcclxuICAgICAgICBpZiAoc3RhdHVzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0VG9Ib21lKClcclxuICAgICAgICB9XHJcbiAgICB9LCAxKVxyXG59XHJcblxyXG5sZXQgcmVkaXJlY3RUb0hvbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnLi9ob21lLmh0bWwnKVxyXG59XHJcblxyXG5sZXQgcmVkaXJlY3RUb0xvZ2luID0gZnVuY3Rpb24gKCkge1xyXG4gICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoJy4vaW5kZXguaHRtbCcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xyXG4gICAgbGV0IGRkID0gZGF0ZS5nZXREYXRlKCk7XHJcbiAgICBpZiAoZGQgPCAxMCkgZGQgPSAnMCcgKyBkZDtcclxuXHJcbiAgICBsZXQgbW0gPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgaWYgKG1tIDwgMTApIG1tID0gJzAnICsgbW07XHJcblxyXG4gICAgbGV0IHl5ID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgaWYgKHl5IDwgMTApIHl5ID0gJzAnICsgeXk7XHJcblxyXG4gICAgcmV0dXJuIGRkICsgJy4nICsgbW0gKyAnLicgKyB5eTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICAgIGRpc2FibGVGb3JtQnV0dG9uLFxyXG4gICAgdG9nZ2xlSW5wdXRXYXJuaW5nLFxyXG4gICAgY2hlY2tVc2VyRGF0YSxcclxuICAgIHVzZXJGaW5kZXIsXHJcbiAgICBsb2dvdXQsXHJcbiAgICB1bmF1dGhvcml6ZWRVc2VyQ2hlY2ssXHJcbiAgICBhdXRob3JpemVkVXNlckNoZWNrLFxyXG4gICAgcmVkaXJlY3RUb0hvbWUsXHJcbiAgICBmb3JtYXREYXRlXHJcbn1cclxuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBkaXNhYmxlRm9ybUJ1dHRvbiwgdXNlckZpbmRlciwgdG9nZ2xlSW5wdXRXYXJuaW5nLCBjaGVja1VzZXJEYXRhLCBhdXRob3JpemVkVXNlckNoZWNrLCByZWRpcmVjdFRvSG9tZSB9IGZyb20gJy4vdXRpbHMuanMnO1xyXG5cclxubGV0IHNpZ25JbkZvcm0gPSBkb2N1bWVudC5mb3Jtc1snc2lnbi1pbiddO1xyXG5sZXQgdXNlckVtYWlsID0gc2lnbkluRm9ybS5lbGVtZW50c1sndXNlci1lbWFpbCddO1xyXG5sZXQgdXNlclBhc3N3b3JkID0gc2lnbkluRm9ybS5lbGVtZW50c1sndXNlci1wYXNzd29yZCddO1xyXG5sZXQgbG9naW5CdXR0b24gPSBzaWduSW5Gb3JtLmVsZW1lbnRzWydhdXRob3JpemF0aW9uLWJ1dHRvbiddO1xyXG5cclxuc2lnbkluRm9ybS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGRpc2FibGVGb3JtQnV0dG9uKHRoaXMsIGxvZ2luQnV0dG9uKVxyXG59KTtcclxuXHJcbnVzZXJFbWFpbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICB0b2dnbGVJbnB1dFdhcm5pbmcodGhpcywgJy5pbnB1dC1lbWFpbCcpXHJcbn0pXHJcblxyXG51c2VyUGFzc3dvcmQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgdG9nZ2xlSW5wdXRXYXJuaW5nKHRoaXMsICcuaW5wdXQtcGFzc3dvcmQnKVxyXG59KVxyXG5cclxuc2lnbkluRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBsZXQgbG9naW5NZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvZy1pbicpXHJcbiAgICBsb2dpbk1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG4gICAgbG9naW5NZXNzYWdlLmlubmVySFRNTCA9ICcnXHJcbiAgICBsZXQgdXNlckVtYWlsVmFsdWUgPSB1c2VyRW1haWwudmFsdWU7XHJcbiAgICBsZXQgdXNlclBhc3N3b3JkVmFsdWUgPSB1c2VyUGFzc3dvcmQudmFsdWU7XHJcbiAgICBpZiAoIXVzZXJGaW5kZXIodXNlckVtYWlsVmFsdWUpKSB7XHJcbiAgICAgICAgbGV0IHdhcm5pbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGV4dC13YXJuaW5nJyk7XHJcbiAgICAgICAgd2FybmluZy5pbm5lckhUTUwgPSBcIkEgdXNlciB3aXRoIHN1Y2ggZW1haWwgYWRkcmVzcyBkb2VzIG5vdCBleGlzdFwiO1xyXG4gICAgICAgIHdhcm5pbmcuY2xhc3NMaXN0LmFkZCgnc2hvdycpXHJcbiAgICB9IGVsc2UgIHtcclxuICAgICAgICBpZiAoY2hlY2tVc2VyRGF0YSh1c2VyRW1haWxWYWx1ZSwgdXNlclBhc3N3b3JkVmFsdWUpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGxvZ2luTWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCd0ZXh0LXdhcm5pbmcnKVxyXG4gICAgICAgICAgICBsb2dpbk1lc3NhZ2UuaW5uZXJIVE1MID0gJ1lvdSBhcmUgc3VjY2Vzc2Z1bGx5IGxvZ2dlZCBpbiEnXHJcbiAgICAgICAgICAgIGxvZ2luTWVzc2FnZS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY3RpdmUtdXNlcicsIHVzZXJFbWFpbFZhbHVlKVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgcmVkaXJlY3RUb0hvbWUoKVxyXG4gICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsb2dpbk1lc3NhZ2UuaW5uZXJIVE1MID0gJ09vcHMsIHNvbWV0aGluZyB3cm9uZyB3aXRoIHlvdXJzIGVtYWlsIG9yIHBhc3N3b3JkISdcclxuICAgICAgICAgICAgbG9naW5NZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ3RleHQtd2FybmluZycpO1xyXG4gICAgICAgICAgICBsb2dpbk1lc3NhZ2UuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSlcclxuXHJcbmF1dGhvcml6ZWRVc2VyQ2hlY2soKVxyXG4iXSwibmFtZXMiOlsiZGlzYWJsZUZvcm1CdXR0b24iLCJmb3JtIiwiYnV0dG9uSW5Gb3JtIiwiZGlzYWJsZWQiLCJjaGVja1ZhbGlkaXR5IiwidG9nZ2xlSW5wdXRXYXJuaW5nIiwiaW5wdXRGaWVsZCIsInNlbGVjdG9yIiwid2FybmluZyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInVzZXJGaW5kZXIiLCJlbWFpbFZhbHVlIiwidXNlcnMiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwidXNlciIsImZpbmRJbmRleCIsImVtYWlsIiwiY2hlY2tVc2VyRGF0YSIsInBhc3N3b3JkVmFsdWUiLCJsb2dvdXQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlSXRlbSIsInJlZGlyZWN0VG9Mb2dpbiIsInVuYXV0aG9yaXplZFVzZXJDaGVjayIsInNldFRpbWVvdXQiLCJhdXRob3JpemVkVXNlckNoZWNrIiwicmVkaXJlY3RUb0hvbWUiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlcGxhY2UiLCJmb3JtYXREYXRlIiwiZGF0ZSIsImRkIiwiZ2V0RGF0ZSIsIm1tIiwiZ2V0TW9udGgiLCJ5eSIsImdldEZ1bGxZZWFyIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJzaWduSW5Gb3JtIiwiZm9ybXMiLCJ1c2VyRW1haWwiLCJlbGVtZW50cyIsInVzZXJQYXNzd29yZCIsImxvZ2luQnV0dG9uIiwidGhpcyIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJsb2dpbk1lc3NhZ2UiLCJpbm5lckhUTUwiLCJ1c2VyRW1haWxWYWx1ZSIsInVzZXJQYXNzd29yZFZhbHVlIiwic2V0SXRlbSJdLCJzb3VyY2VSb290IjoiIn0=